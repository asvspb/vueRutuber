# Расширенный интерактивный курс Backend-разработки (60 уроков)

Этот курс предназначен для глубокого погружения в серверную разработку на Python. Программа разбита на три модуля по 20 уроков: от основ языка до создания сложных API и работы с базами данных.

---

## Модуль 1: Python — Язык и Инструменты (20 уроков)

**Цель:** Овладеть Python на уровне, достаточном для написания чистого, эффективного и типизированного кода.

### Блок 1: Основы и Синтаксис (Уроки 1-5)
1.  **Введение и Настройка:** Интерпретатор, виртуальное окружение (`venv`), `pip`. Запуск скриптов.
    *   *Задание:* Настроить окружение и запустить скрипт, который выводит информацию о системе (`sys`, `os`).
2.  **Типы данных и Переменные:** `int`, `float`, `str`, `bool`. Динамическая типизация. f-строки.
    *   *Задание:* Написать конвертер валют, принимающий ввод от пользователя.
3.  **Управление потоком:** `if/elif/else`, логические операторы. `match/case` (Python 3.10+).
    *   *Задание:* Реализовать текстовый квест с ветвлением сюжета.
4.  **Циклы:** `for`, `while`, `range`, `enumerate`, `break/continue`.
    *   *Задание:* Написать генератор паролей заданной длины и сложности.
5.  **Функции:** `def`, аргументы (`*args`, `**kwargs`), `return`, lambda-функции.
    *   *Задание:* Написать функцию-декоратор, которая замеряет время выполнения другой функции.

### Блок 2: Структуры данных (Уроки 6-10)
6.  **Списки (Lists):** Методы списков, срезы (slicing), списковые включения (list comprehensions).
    *   *Задание:* Отфильтровать список пользователей по возрасту, используя list comprehension.
7.  **Словари (Dictionaries):** Методы `.get()`, `.items()`, `.keys()`. Dictionary comprehensions.
    *   *Задание:* Подсчитать частоту встречаемости слов в тексте.
8.  **Кортежи (Tuples) и Множества (Sets):** Неизменяемость кортежей. Уникальность элементов в множествах. Операции над множествами.
    *   *Задание:* Найти общих друзей у двух пользователей (пересечение множеств).
9.  **Работа с файлами:** Context manager (`with open`), чтение и запись (txt, json, csv).
    *   *Задание:* Написать скрипт, который читает CSV-файл и конвертирует его в JSON.
10. **Обработка исключений:** `try/except/finally`, создание собственных исключений.
    *   *Задание:* Написать безопасный калькулятор, который не падает при делении на ноль или вводе букв.

### Блок 3: ООП и Модули (Уроки 11-15)
11. **Классы и Объекты:** `class`, `__init__`, `self`. Атрибуты и методы.
    *   *Задание:* Создать класс `User` с методами регистрации и входа.
12. **Наследование и Полиморфизм:** `super()`, переопределение методов.
    *   *Задание:* Создать иерархию классов `Employee` -> `Manager`, `Developer` с расчетом зарплаты.
13. **Инкапсуляция и Свойства:** Приватные атрибуты (`__`), декоратор `@property`.
    *   *Задание:* Реализовать класс `BankAccount` с защитой от отрицательного баланса.
14. **Магические методы (Dunder methods):** `__str__`, `__repr__`, `__eq__`, `__len__`.
    *   *Задание:* Сделать так, чтобы объекты вашего класса можно было складывать (`+`) и сравнивать.
15. **Модули и Пакеты:** Импорт (`import`, `from`), структура пакета (`__init__.py`).
    *   *Задание:* Разбить большой скрипт на несколько модулей и организовать их в пакет.

### Блок 4: Продвинутый Python (Уроки 16-20)
16. **Type Hinting:** Аннотации типов, `List`, `Dict`, `Optional`, `Union` (из `typing`). MyPy.
    *   *Задание:* Полностью типизировать код из предыдущих уроков и проверить его через MyPy.
17. **Dataclasses:** Декоратор `@dataclass`.
    *   *Задание:* Переписать классы моделей данных на dataclasses.
18. **Итераторы и Генераторы:** `yield`, создание собственных итераторов.
    *   *Задание:* Написать генератор, который читает огромный файл построчно, не загружая его в память.
19. **Асинхронность (AsyncIO):** `async/await`, Event Loop, корутины.
    *   *Задание:* Написать скрипт, который делает 10 запросов к сайту параллельно.
20. **Виртуальные окружения и Зависимости:** `poetry` vs `pip`. Файл `pyproject.toml`.
    *   *Задание:* Инициализировать новый проект с помощью Poetry и добавить зависимости.

---

## Модуль 2: FastAPI — Создание API (20 уроков)

**Цель:** Научиться строить быстрые, документированные и валидируемые REST API.

### Блок 1: Основы HTTP и FastAPI (Уроки 1-5)
1.  **Протокол HTTP:** Методы (GET, POST, PUT, DELETE), коды ответов, заголовки.
    *   *Задание:* Изучить запросы в браузере через Network Tab.
2.  **Hello FastAPI:** Установка, создание приложения, первый эндпоинт. Swagger UI.
    *   *Задание:* Запустить сервер и сделать запрос через Swagger.
3.  **Path Parameters:** Передача данных через URL (`/users/{user_id}`). Типизация параметров.
    *   *Задание:* Создать эндпоинт-калькулятор `/calc/{op}/{a}/{b}`.
4.  **Query Parameters:** Параметры запроса (`?skip=0&limit=10`). Значения по умолчанию.
    *   *Задание:* Реализовать пагинацию для списка товаров.
5.  **Request Body:** Передача JSON. Pydantic модели.
    *   *Задание:* Создать эндпоинт для создания товара, принимающий JSON с валидацией.

### Блок 2: Валидация и Модели (Уроки 6-10)
6.  **Pydantic Deep Dive:** `Field`, валидаторы (`@validator`), вложенные модели.
    *   *Задание:* Создать сложную модель регистрации с валидацией пароля (длина, спецсимволы).
7.  **Response Model:** Фильтрация выходных данных (скрытие паролей). `response_model`.
    *   *Задание:* Сделать так, чтобы API возвращал пользователя без поля `password_hash`.
8.  **Обработка ошибок:** `HTTPException`, кастомные обработчики ошибок.
    *   *Задание:* Возвращать 404, если товар не найден, и 400, если цена отрицательная.
9.  **Form Data и File Upload:** Загрузка файлов (`UploadFile`).
    *   *Задание:* Создать эндпоинт для загрузки аватарки пользователя.
10. **Структура проекта:** Роутеры (`APIRouter`), разделение на файлы.
    *   *Задание:* Рефакторинг: разнести эндпоинты пользователей и товаров по разным файлам.

### Блок 3: Зависимости и Безопасность (Уроки 11-15)
11. **Dependency Injection:** `Depends`. Создание переиспользуемых зависимостей.
    *   *Задание:* Написать зависимость для пагинации, которую можно использовать во всех эндпоинтах.
12. **Аутентификация (OAuth2):** Схема `OAuth2PasswordBearer`. Получение токена.
    *   *Задание:* Реализовать эндпоинт `/token` (пока с фейковой проверкой пароля).
13. **JWT Токены:** Создание и валидация JWT. Библиотека `python-jose`.
    *   *Задание:* Генерировать настоящий JWT при входе.
14. **Защита эндпоинтов:** `get_current_user`. Требование авторизации.
    *   *Задание:* Закрыть доступ к созданию товаров только для авторизованных пользователей.
15. **Middleware:** Перехват запросов (CORS, логирование, время выполнения).
    *   *Задание:* Добавить заголовок `X-Process-Time` ко всем ответам сервера.

### Блок 4: Тестирование и Деплой (Уроки 16-20)
16. **Pytest:** Основы тестирования. Фикстуры (`conftest.py`).
    *   *Задание:* Написать простой тест для функции-утилиты.
17. **Тестирование API:** `TestClient`. Проверка статус-кодов и тела ответа.
    *   *Задание:* Покрыть тестами все CRUD операции для товаров.
18. **Конфигурация:** Переменные окружения (`.env`), `pydantic-settings`.
    *   *Задание:* Вынести секретный ключ и настройки БД в `.env`.
19. **Docker:** Написание `Dockerfile` для FastAPI приложения.
    *   *Задание:* Собрать образ и запустить контейнер с приложением.
20. **Docker Compose:** Запуск приложения вместе с (пока фиктивной) БД.
    *   *Задание:* Описать сервис в `docker-compose.yml`.

---

## Модуль 3: Базы Данных и Архитектура (20 уроков)

**Цель:** Научиться проектировать схемы БД, работать с ORM и строить масштабируемую архитектуру.

### Блок 1: SQL и SQLAlchemy (Уроки 1-5)
1.  **Реляционные БД:** Таблицы, ключи (PK, FK), индексы. SQLite vs PostgreSQL.
    *   *Задание:* Спроектировать схему БД для блога на бумаге.
2.  **SQLAlchemy Core vs ORM:** Подключение к БД (`Engine`, `Session`).
    *   *Задание:* Настроить подключение к SQLite файлу.
3.  **Определение моделей:** `DeclarativeBase`, типы колонок, отношения (`relationship`).
    *   *Задание:* Описать модели `User` и `Post` (один ко многим).
4.  **Миграции (Alembic):** Инициализация, создание миграций, применение (`upgrade/downgrade`).
    *   *Задание:* Создать первую миграцию и применить её к БД.
5.  **CRUD с ORM:** Добавление, чтение, обновление и удаление объектов через сессию.
    *   *Задание:* Написать скрипт, наполняющий БД тестовыми данными.

### Блок 2: Продвинутая работа с БД (Уроки 6-10)
6.  **Сложные запросы:** `filter`, `order_by`, `limit`, `offset`.
    *   *Задание:* Получить 5 последних постов конкретного пользователя.
7.  **Joins и Eager Loading:** Проблема N+1. `joinedload`, `selectinload`.
    *   *Задание:* Оптимизировать запрос получения постов вместе с авторами.
8.  **Отношения Многие-ко-Многим:** Таблица ассоциаций.
    *   *Задание:* Добавить систему тегов для постов.
9.  **Асинхронная SQLAlchemy:** `AsyncSession`, `create_async_engine`.
    *   *Задание:* Перевести работу с БД на асинхронный драйвер (`aiosqlite` или `asyncpg`).
10. **Транзакции:** `commit`, `rollback`. Атомарность операций.
    *   *Задание:* Реализовать перевод "денег" между пользователями (с гарантией целостности).

### Блок 3: NoSQL и Кэширование (Уроки 11-15)
11. **Введение в Redis:** Ключ-значение, TTL, типы данных Redis.
    *   *Задание:* Запустить Redis в Docker.
12. **Кэширование в FastAPI:** Использование Redis для кэширования тяжелых запросов.
    *   *Задание:* Кэшировать список постов на 60 секунд.
13. **Celery (Фоновые задачи):** Брокеры сообщений. Зачем нужны воркеры.
    *   *Задание:* Настроить Celery с Redis.
14. **Запуск задач:** Отправка email в фоне.
    *   *Задание:* Создать эндпоинт, который ставит задачу отправки приветственного письма.
15. **Периодические задачи (Celery Beat):** Планировщик.
    *   *Задание:* Настроить задачу очистки старых логов каждую ночь.

### Блок 4: Архитектура и Продакшн (Уроки 16-20)
16. **Паттерн Repository:** Отделение логики работы с БД от бизнес-логики.
    *   *Задание:* Вынести все SQL-запросы в репозитории.
17. **Паттерн Service:** Бизнес-логика приложения.
    *   *Задание:* Создать сервисный слой, который использует репозитории.
18. **Логирование и Мониторинг:** Настройка `logging`. Sentry (обзорно).
    *   *Задание:* Настроить структурированное логирование (JSON logs).
19. **CI/CD (GitHub Actions):** Автоматический прогон тестов и линтеров.
    *   *Задание:* Настроить workflow, который блокирует PR, если тесты не прошли.
20. **Финальная сборка:** `docker-compose` для всего стека (App, DB, Redis, Worker).
    *   *Задание:* Запустить полноценный продакшн-ready стек одной командой.

---

## Финальный проект курса

**"Корпоративный мессенджер (Slack-like)"**

Разработать Backend для мессенджера с поддержкой реального времени.

**Функционал:**
1.  **Пользователи:** Регистрация, JWT, аватарки.
2.  **Чаты:** Личные сообщения и каналы.
3.  **Сообщения:** Отправка, редактирование, удаление.
4.  **Real-time:** WebSockets для мгновенной доставки сообщений.
5.  **Поиск:** Полнотекстовый поиск по сообщениям.

**Технический стек:**
*   Python 3.12+
*   FastAPI (Async)
*   PostgreSQL + SQLAlchemy (Async)
*   Redis (Кэш + Pub/Sub для WebSockets)
*   Docker & Docker Compose
*   Pytest (покрытие > 80%)
# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–ª–∞–Ω: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–µ–æ

## –¶–µ–ª—å

–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–µ–æ (`added_at`) –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —Ñ–∏–ª—å–º–æ–≤.

---

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### Backend ‚úÖ –ì–æ—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| `models.py` | ‚úÖ | `added_at = Column(DateTime, default=func.now())` |
| `schemas.py` | ‚úÖ | `added_at: Optional[datetime] = None` –≤ —Å—Ö–µ–º–µ `Movie` |
| API Response | ‚úÖ | –ü–æ–ª–µ `added_at` —É–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO 8601 |

### Frontend ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| `useMovies.ts` | ‚úÖ | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Movie` —Å–æ–¥–µ—Ä–∂–∏—Ç `added_at: string` |
| `moviesService.ts` | ‚úÖ | –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å API |
| `MovieList.vue` | ‚ùå | –ü–æ–ª–µ `added_at` –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è |

---

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –®–∞–≥ 1: MovieList.vue ‚Äî –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç—ã

**–§–∞–π–ª:** `src/components/MovieList.vue`

**–ú–µ—Å—Ç–æ –≤—Å—Ç–∞–≤–∫–∏:** –ü–æ—Å–ª–µ –±–ª–æ–∫–∞ —Å `duration` (—Å—Ç—Ä–æ–∫–∏ 99-102)

```vue
<div v-if="movie.added_at" class="text-caption text-grey">
  <v-icon size="small" class="mr-1">mdi-calendar-plus</v-icon>
  {{ formatDate(movie.added_at) }}
</div>
```

### –®–∞–≥ 2: MovieList.vue ‚Äî –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã

**–§–∞–π–ª:** `src/components/MovieList.vue`

**–ú–µ—Å—Ç–æ –≤—Å—Ç–∞–≤–∫–∏:** –ü–æ—Å–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ `formatViews` (—Å—Ç—Ä–æ–∫–∞ 198)

```typescript
// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
const formatDate = (dateString: string | null | undefined): string => {
  if (!dateString) return ''
  
  const date = new Date(dateString)
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –¥–∞—Ç—ã
  if (isNaN(date.getTime())) return ''
  
  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: "15 –¥–µ–∫ 2024"
  return date.toLocaleDateString('ru-RU', {
    day: 'numeric',
    month: 'short',
    year: 'numeric'
  })
}
```

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç A: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è –¥–∞—Ç–∞ ("2 –¥–Ω—è –Ω–∞–∑–∞–¥")

```typescript
const formatRelativeDate = (dateString: string): string => {
  const date = new Date(dateString)
  const now = new Date()
  const diffMs = now.getTime() - date.getTime()
  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24))
  
  if (diffDays === 0) return '–°–µ–≥–æ–¥–Ω—è'
  if (diffDays === 1) return '–í—á–µ—Ä–∞'
  if (diffDays < 7) return `${diffDays} –¥–Ω–µ–π –Ω–∞–∑–∞–¥`
  if (diffDays < 30) return `${Math.floor(diffDays / 7)} –Ω–µ–¥. –Ω–∞–∑–∞–¥`
  return date.toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' })
}
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ date-fns

```bash
npm install date-fns
```

```typescript
import { formatDistanceToNow } from 'date-fns'
import { ru } from 'date-fns/locale'

const formatDate = (dateString: string): string => {
  return formatDistanceToNow(new Date(dateString), { 
    addSuffix: true, 
    locale: ru 
  })
}
```

---

## –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         [–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ]           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [2024]  [–ñ–∞–Ω—Ä]                 ‚îÇ ‚Üê —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —á–∏–ø—ã
‚îÇ üëÅ 1.2K –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤              ‚îÇ ‚Üê —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ
‚îÇ üïê 01:23:45                     ‚îÇ ‚Üê —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ (duration)
‚îÇ üìÖ 15 –¥–µ–∫ 2024                  ‚îÇ ‚Üê –ù–û–í–û–ï (added_at)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ò–∑–º–µ–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –¢–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏—è | –°—Ç—Ä–æ–∫–∏ |
|------|---------------|--------|
| `src/components/MovieList.vue` | –î–æ–±–∞–≤–∏—Ç—å template | +4 —Å—Ç—Ä–æ–∫–∏ –ø–æ—Å–ª–µ 102 |
| `src/components/MovieList.vue` | –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é | +12 —Å—Ç—Ä–æ–∫ –ø–æ—Å–ª–µ 198 |

**–ò—Ç–æ–≥–æ:** ~16 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:4173`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç—ã –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª—å)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É `null` –∑–Ω–∞—á–µ–Ω–∏–π

### Unit —Ç–µ—Å—Ç

```typescript
// src/components/__tests__/MovieList.spec.ts
describe('formatDate', () => {
  it('formats ISO date to Russian locale', () => {
    expect(formatDate('2024-12-15T10:30:00')).toBe('15 –¥–µ–∫. 2024 –≥.')
  })
  
  it('returns empty string for null', () => {
    expect(formatDate(null)).toBe('')
  })
})
```

---

## –†–∏—Å–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –†–µ—à–µ–Ω–∏–µ |
|------|-------------|---------|
| –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞—Ç—ã –≤ –ë–î | –ù–∏–∑–∫–∞—è | ISO 8601 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω |
| Timezone issues | –°—Ä–µ–¥–Ω—è—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UTC –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è |
| –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –±–µ–∑ `added_at` | –ù–∏–∑–∫–∞—è | –ü—Ä–æ–≤–µ—Ä–∫–∞ `v-if="movie.added_at"` |

---

## –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

| –≠—Ç–∞–ø | –í—Ä–µ–º—è |
|------|-------|
| –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | 10 –º–∏–Ω |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 5 –º–∏–Ω |
| **–ò—Ç–æ–≥–æ** | **15 –º–∏–Ω** |


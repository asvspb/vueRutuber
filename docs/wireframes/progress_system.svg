<svg xmlns="http://www.w3.org/2000/svg" width="1440" height="1200">
  <style>
    .box { fill: #ffffff; stroke: #222; stroke-width: 2; }
    .muted { fill: #f5f5f5; }
    .label { font: 14px Arial, sans-serif; fill: #222; }
    .title { font: bold 20px Arial, sans-serif; }
    .subtitle { font: bold 16px Arial, sans-serif; }
    .hint { font: 12px Arial, sans-serif; fill: #666; }
    .ok { fill: #f6ffed; stroke: #b7eb8f; }
    .warn { fill: #fffbe6; stroke: #ffe58f; }
    .err { fill: #fff1f0; stroke: #ffa39e; }
    .bar-bg { fill: #f0f0f0; }
    .bar-ok { fill: #52c41a; }
    .pill { fill: #e6f7ff; stroke: #91d5ff; rx: 12; }
  </style>

  <!-- Header -->
  <rect class="box muted" x="20" y="20" width="1400" height="70" rx="10"/>
  <text class="title" x="40" y="65">Система прогресса</text>

  <!-- 1. Сводка прогресса на главной -->
  <rect class="box" x="20" y="110" width="900" height="260" rx="10"/>
  <text class="subtitle" x="40" y="145">Сводка на главной</text>
  <text class="hint" x="40" y="170">• Уровень: Level 1 (JS Core)</text>
  <text class="hint" x="40" y="195">• Выполнено уроков: 3/8</text>
  <text class="hint" x="40" y="220">• Стрик: 4 дня подряд</text>

  <rect class="bar-bg" x="40" y="240" width="860" height="18" rx="9"/>
  <rect class="bar-ok" x="40" y="240" width="320" height="18" rx="9"/>
  <text class="hint" x="910" y="254" text-anchor="end">37%</text>

  <rect class="ok" x="40" y="270" width="420" height="80" rx="8"/>
  <text class="hint" x="55" y="300">Capstone A: 20% • Тесты + docker-compose в прогрессе</text>
  <rect class="warn" x="480" y="270" width="420" height="80" rx="8"/>
  <text class="hint" x="495" y="300">Следующая цель: Async/Await (урок)</text>

  <!-- 2. Прогресс урока (чек-лист) -->
  <rect class="box" x="20" y="390" width="900" height="380" rx="10"/>
  <text class="subtitle" x="40" y="425">Прогресс урока: Основы синтаксиса</text>
  <text class="hint" x="40" y="450">Структура: ТЗ → Референс → Теория → Практика → Чек-лист → Решение</text>

  <rect class="muted" x="40" y="470" width="860" height="260" rx="8"/>
  <text class="label" x="60" y="500">[ ] Прочитал ТЗ</text>
  <text class="label" x="60" y="530">[x] Сверил с референсом</text>
  <text class="label" x="60" y="560">[x] Теория усвоена</text>
  <text class="label" x="60" y="590">[ ] Выполнил практику (код компилируется)</text>
  <text class="label" x="60" y="620">[ ] Юнит-тесты прошли (vitest)</text>
  <text class="label" x="60" y="650">[ ] Самопроверка по чек-листу</text>

  <rect class="bar-bg" x="60" y="680" width="820" height="12" rx="6"/>
  <rect class="bar-ok" x="60" y="680" width="360" height="12" rx="6"/>
  <text class="hint" x="890" y="690" text-anchor="end">44%</text>

  <!-- 3. Капстоуны и синхронизация -->
  <rect class="box" x="940" y="110" width="480" height="660" rx="10"/>
  <text class="subtitle" x="960" y="145">Хранение и синхронизация</text>
   <text class="hint" x="960" y="175">Локально: localStorage.vuExpert_progress</text>
  <text class="hint" x="960" y="200">Опция: Синхронизация через API /api/progress</text>
  <text class="hint" x="960" y="225">Идентификатор пользователя: email/uuid (после авторизации)</text>

  <rect class="muted" x="960" y="245" width="440" height="120" rx="8"/>
  <text class="label" x="980" y="275">Структура данных (локально):</text>
  <text class="hint" x="980" y="300">{ level: 1, lessons: { js_basics: { checklist: [...],</text>
  <text class="hint" x="980" y="320"> completedAt: 1712345678 } }, capstone: {A:0.2,B:0,C:0} }</text>

  <text class="subtitle" x="960" y="395">Вычисление прогресса</text>
  <text class="hint" x="960" y="420">• Уровень: сумма завершённых уроков / всего уроков</text>
  <text class="hint" x="960" y="445">• Урок: доля отмеченных пунктов чек-листа</text>
  <text class="hint" x="960" y="470">• Capstone: доля выполненных milestones</text>

  <text class="subtitle" x="960" y="510">Авто-обновление</text>
  <text class="hint" x="960" y="535">• Юнит-тесты прошли → отметить пункт автоматически</text>
  <text class="hint" x="960" y="560">• Успешный /health и Redis ping → апдейт статуса стека</text>

  <text class="subtitle" x="960" y="600">Состояние синхронизации</text>
  <rect class="ok" x="960" y="615" width="440" height="70" rx="8"/>
  <text class="label" x="975" y="645">Local: OK • Last save: 2 min ago</text>
  <rect class="warn" x="960" y="690" width="440" height="70" rx="8"/>
  <text class="label" x="975" y="720">Sync: Off • Включить после авторизации</text>

  <!-- 4. Панель Capstone -->
  <rect class="box" x="20" y="790" width="1400" height="360" rx="10"/>
  <text class="subtitle" x="40" y="825">Capstone прогресс</text>

  <rect class="muted" x="40" y="850" width="1320" height="90" rx="8"/>
  <text class="label" x="60" y="880">A: SPA + FastAPI + SQLite + Redis + тесты + compose</text>
  <rect class="bar-bg" x="900" y="880" width="440" height="12" rx="6"/>
  <rect class="bar-ok" x="900" y="880" width="160" height="12" rx="6"/>
  <text class="hint" x="1360" y="890" text-anchor="end">36%</text>

  <rect class="muted" x="40" y="950" width="1320" height="90" rx="8"/>
  <text class="label" x="60" y="980">B: PostgreSQL + Alembic + Testcontainers</text>
  <rect class="bar-bg" x="900" y="980" width="440" height="12" rx="6"/>
  <rect class="bar-ok" x="900" y="980" width="0" height="12" rx="6"/>
  <text class="hint" x="1360" y="990" text-anchor="end">0%</text>

  <rect class="muted" x="40" y="1050" width="1320" height="90" rx="8"/>
  <text class="label" x="60" y="1080">C: Security + Healthcheck + Docs</text>
  <rect class="bar-bg" x="900" y="1080" width="440" height="12" rx="6"/>
  <rect class="bar-ok" x="900" y="1080" width="0" height="12" rx="6"/>
  <text class="hint" x="1360" y="1090" text-anchor="end">0%</text>
</svg>

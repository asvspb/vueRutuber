# Правила ведения и обновления документации

## 1. Цели

- Документация всегда отражает актуальное состояние проекта.
- Любое изменение поведения системы сопровождается обновлением соответствующей документации до коммита в git.

## 2. Область действия

Правила распространяются на всю документацию в репозитории, в том числе (но не только):

- `docs/` (архитектура, гайды, how-to, планы внедрения).
- README-файлы в корне и поддиректориях.
- Технические спецификации, описания API, инструкции по деплою.

## 3. Общие принципы

1. **Документация — часть кода.** PR, меняющий поведение системы, должен либо
   - обновлять документацию, либо
   - явно объяснять в описании PR, почему обновление документации не требуется.
2. **Обновление документации — ответственность автора изменения.** Нельзя
   перекладывать её на «когда-нибудь потом».
3. **Нет устаревшей документации.** Устаревшая документация опаснее её отсутствия.
   Если раздел не успеваем поддерживать, его нужно упростить или удалить.

## 4. Процесс перед коммитом / PR

Перед тем как отправлять изменения в git (commit/PR), разработчик или агент ИИ делает:

1. **Определяет воздействие изменения.**
   - Что изменилось: поведение, API, интерфейс, конфигурация, команды запуска, инфраструктура?
2. **Находит связанные документы.**
   - Поиск по проекту по ключевым словам (названия фичи, модуля, команды).
   - Просмотр релевантных файлов в `docs/` и README.
3. **Обновляет документацию.**
   - Описывает новое поведение.
   - Обновляет/добавляет примеры команд, конфигов, API-эндпоинтов.
   - Убирает явно устаревшие фразы и TODO, которые уже не актуальны.
4. **Проверяет консистентность.**
   - Нет противоречий между разными разделами документации.
   - Названия сущностей, фич, переменных окружения совпадают с кодом.
5. **Фиксирует изменения в описании PR.**
   - Кратко перечисляет, какие файлы документации были обновлены и зачем.

## 5. Требования к стилю и оформлению

- Язык: **русский**, технические термины допускаются на английском.
- Структура: заголовки, списки, короткие абзацы, примеры кода/команд.
- Точность важнее объёма: избегаем расплывчатых формулировок.
- При необходимости указываем дату/контекст изменений (например, в заголовке раздела или в истории изменений).

## 6. Правила для агентов ИИ

Этот раздел описывает, как ИИ-агенты должны работать с документацией при изменении кода.

1. **Документация — источник истины.**
   - Перед изменениями агент должен ознакомиться с релевантными документами.
   - Нельзя игнорировать существующую документацию и создавать параллельные описания.

2. **Обязательное обновление при изменении поведения.**
   Агенты обязаны обновлять документацию, если они:
   - меняют или добавляют бизнес-логику;
   - изменяют API (эндпоинты, параметры, форматы ответов);
   - меняют команды запуска/сборки/деплоя;
   - изменяют инфраструктуру (Docker, docker-compose, Redis, БД и т.п.).

3. **Запрет на выдуманные процессы и настройки.**
   - Нельзя описывать в документации шаги, настройки или процессы, которых нет в коде/конфигурации.
   - Если чего-то не хватает (например, нет тестов или авто-деплоя), агент должен явно отметить это как "план" или "предложение", а не как существующую реальность.

4. **Сверка с кодом перед изменением документации.**
   - Перед правкой документации агент проверяет соответствующие файлы кода, конфигураций и скриптов.
   - Если есть сомнения в текущем поведении — агент обязан запросить уточнение у человека.

5. **Сохранение смысла и контекста.**
   - Нельзя радикально менять смысл существующих разделов без явного запроса пользователя.
   - Рефакторинг формулировок допустим, только если смысл остаётся тем же и текст становится понятнее.

6. **Согласованность с существующей структурой.**
   - Новые документы/разделы должны вписываться в текущую структуру `docs/`.
   - При добавлении новых гайдов агент по возможности использует уже принятую структуру заголовков и терминологию.

7. **Прозрачность изменений.**
   - В описании PR/коммита агент кратко объясняет, что именно было изменено в документации и почему.
   - Если изменения носят рекомендательный/плановый характер, это явно помечается ("план", "draft", "предложение").

8. **Ограничения.**
   - Агенты ИИ **не должны** менять юридически значимые документы (лицензии, политики приватности и т.п.) без прямого указания человека.
   - При конфликте между кодом, документацией и инструкциями пользователя приоритет: **прямые инструкции пользователя → код → документация**.

